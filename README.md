 # 新安江水文模型 (XAJ Model)

## 项目简介

新安江水文模型是一个概念性水文模型，主要用于模拟流域的降雨-径流过程。本项目是使用Java语言实现的新安江模型，包含了产流计算、水源划分、土壤水分计算和蒸散发计算等核心功能。

### 主要功能

1. **产流计算**
   - 基于蓄满产流理论
   - 考虑土壤分层蓄水
   - 计算净雨量和产流量

2. **水源划分**
   - 地表径流
   - 壤中流
   - 地下径流

3. **土壤水分计算**
   - 上层土壤水分
   - 下层土壤水分
   - 深层土壤水分

4. **蒸散发计算**
   - 上层蒸散发
   - 下层蒸散发
   - 深层蒸散发

## 技术架构

- 开发语言：Java 8
- 运行环境：JDK 8+
- 容器化：Docker

## 安装说明

### 环境要求

- JDK 8 或更高版本
- Docker（可选，用于容器化部署）
- Maven（可选，用于依赖管理）

### 本地安装

1. 克隆项目
```bash
git clone [项目地址]
cd XAJ
```

2. 编译项目
```bash
javac XAJModel/src/XajModel.java
```

3. 运行项目
```bash
java -cp XAJModel/src XajModel
```

## 使用说明

### 模型参数设置

模型包含以下主要参数组：

1. **土壤含水量参数**
   - WUM：上层土壤蓄水容量
   - WLM：下层土壤蓄水容量
   - WDM：深层土壤蓄水容量

2. **蒸散发参数**
   - K：蒸发皿折算系数
   - C：深层蒸散发系数

3. **产流参数**
   - B：流域张力水蓄水容量曲线分布系数
   - Imp：不透水面积与全流域面积的比值

4. **水源划分参数**
   - SM：流域平均自由水蓄水容量
   - EX：自由水蓄水容量曲线指数
   - KSS：自由水蓄水库对壤中流的出流系数
   - KG：自由水蓄水库对地下径流出流系数

### 示例代码

```java
// 初始化模型
XajModel xajModel = new XajModel();

// 设置参数
xajModel.SetSoilWaterStorageParam(0.1, 0.2, 0.3)  // 设置土壤分层参数
        .SetEvapotranspirationParam(0.5, 0.1)      // 设置蒸发参数
        .SetRunoffGenerationParam(0.2, 0.1)        // 设置产流参数
        .SetSourcePartitionParam(30, 1.2, 0.6, 0.1); // 设置水源划分参数

// 执行计算
xajModel.ComputeRunoffGeneration(P, E, 20, 30, 40);  // 计算产流
```

### 输入数据格式

1. **降雨序列 (P)**
   - 类型：double数组
   - 单位：毫米
   - 示例：[10, 24.1, 20.4, ...]

2. **蒸发序列 (E)**
   - 类型：double数组
   - 单位：毫米
   - 示例：[0.1, 0, 0.1, ...]

3. **初始土壤含水量**
   - 上层：20mm
   - 下层：30mm
   - 深层：40mm

## 模型原理

### 产流计算理论

新安江模型采用蓄满产流理论，主要特点：
- 当土壤含水量达到田间持水量时，继续降雨将产生径流
- 考虑土壤分层蓄水特性
- 计算净雨量和产流量

### 水源划分原理

将产流量划分为三种水源：
1. 地表径流
2. 壤中流
3. 地下径流

## 注意事项

1. 参数设置建议
   - B值范围：0.1-0.4
   - C值范围：0.09-0.20
   - 其他参数根据实际流域特性调整

2. 数据要求
   - 降雨和蒸发数据需要同步
   - 时间序列长度需要一致
   - 数据单位统一使用毫米

## 常见问题

1. 模型运行错误
   - 检查参数设置是否合理
   - 确认输入数据格式正确
   - 验证时间序列长度一致

2. 计算结果异常
   - 检查参数范围是否合理
   - 验证输入数据质量
   - 确认计算过程正确

## 维护与支持

如有问题或建议，请通过以下方式联系：
- 提交Issue
- 发送邮件至641945043@qq.com

## 许可证

MIT
